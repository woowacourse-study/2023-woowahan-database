# 목차

1. [데이터베이스 설계](#1-데이터베이스-설계) <br/>
2. [ER다이어그램](#2-er다이어그램) <br/>

<br/>

# 34강 - 데이터베이스 설계

## 1. 데이터베이스 설계

- **데이터베이스 설계** : 데이터베이스의 스키마 내에 테이블, 인덱스, 뷰 등의 데이터베이스 객체를 정의하는 것입니다. **(= 스키마 설계)**

테이블을 설계할 땐 **테이블 정의서**나 설계도 등의 문서를 작성하는 경우가 많습니다.

**테이블 정의서 (DESC) 예제)**

| 열명      | 논리명   | 자료형      | NULL | 기본값 |
| --------- | -------- | ----------- | ---- | ------ |
| item_code | 상품코드 | CHAR(4)     | No   |        |
| item_name | 상품명   | VARCHAR(30) | Yes  |        |

<br/>

### 1) 물리명과 논리명

테이블을 설계할 때는 테이블 이름이나 열 이름을 지정합니다. 그 과정에서 한 테이블에 대해 두 개의 이름으로 지정할 때도 있는데, 여기서 논리명과 물리명으로 나뉩니다.

- **물리명** : 데이터베이스에서 사용될 이름으로, 실제로는 CREATE TABLE에 지정하는 이름을 말합니다.
  - 시스테 규칙에 따라 길이에 제한이 있거나 공백문자를 사용할 수 없는 등의 제약이 따릅니다.
  - 그래서 전통적으로 알파벳을 사용해 이름을 지정합니다.
- **논리명** : 테이블의 **'설계상 이름'** 에 해당합니다.
  - 별다른 제약 사항이 없고, 테이블에 대해 물리명으로 다 설명이 될 수 없는 경우에 지정합니다.
  - 또한, 언제든지 변경 가능합니다.

<br/>

### 2) 자료형

테이블의 각 열에는 자료형을 지정해야하는데, 각 열에 저장될 유형에 따라 자료형을 적절히 적용해줘야 합니다. 즉, 무엇이든 저장할 수 있는 자료형은 존재하지 않는다는 뜻입니다.

또한, '1,2,3 중 하나만' 혹은 'yes, no 중 하나만' 과 같은 데이터 값으로 취급한다면, 데이터베이스 기능으로 제약 **(CHECK 제약)** 을 걸 수 있습니다. 이런 제약의 경우, 정의서의 비고란에 적어두는 경우가 많습니다.

<br/>

### 3) 고정길이와 가변길이

제조번호처럼 자리수가 이미 정해져 있는 경우엔 고정길이 문자열이 좋습니다. 그러나 문자열의 길이의 변동폭이 클 경우엔 가변길이 문자열이 적합합니다.

가변길이의 경우 보통 VARCHAR 형으로 지정하지만, 이는 최대 크기가 수천 바이트이다. 때문에, 큰 파일을 담고 싶다면 **LOB (Large Object)** 형을 사용하면 됩니다. 물론 LOB형은 인덱스를 지정할 수 없다는 제약이 존재합니다.

<br/>

### 4) 기본키

보통 테이블의 행에 **'유일성'** 을 지정할 때 사용합니다. 물론 기본키로 지정할 열이 잘 생각나지 않을 수 있지만, 그럴땐 **자동증가 열**을 사용해서 기본키로 지정하면 해결할 수 있습니다.

자동증가는 INSERT 할 경우 번호를 자동으로 증가시켜 저장해주는 편리한 열입니다.  MySQL 로 예를 들자면, **AUTO_INCREMENT** 를 지정합니다. 그리고 그것을 적용한 열에 **PRIMARY KEY, UNIQUE** 로 유일성을 지정하면 됩니다.

<br/>

## 2. ER다이어그램

- **테이블을 설계할 때 테이블 간의 관계를 명확히 하기 위해 설계도를 작성하는 데에 널리 쓰이는 도식입니다.**

- **E** : Entity (개체)
- **R** : Relationship (관계)

즉, ER다이어그램은 개체 간의 관계를 표현한 것입니다. 개체는 사각형으로 표기하며, 사각형 상단엔 개체 이름, 사각형 안에는, 개체의 속성(열)을 표기합니다. 속성은 주로 논리명으로 표기합니다.

또한 개체와 개체가 서로 연계되는 경우엔 선으로 이어서 표현합니다. 연계를 표기할 땐 서로 몇 개의 데이터 행과 연관되는지, 즉, 몇 대 몇의 관계를 가지는지를 숫자나 기호로 나타낼 수 있습니다. **(카디널리티 or 다중도)**

1. 일 대 일
2. 일 대 다
3. 다 대 다